"use strict";(self.webpackChunkdhiwise_document=self.webpackChunkdhiwise_document||[]).push([[1266],{3905:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>m});var t=a(67294);function s(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){s(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,s=function(e,n){if(null==e)return{};var a,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(s[a]=e[a]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var i=t.createContext({}),p=function(e){var n=t.useContext(i),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},d=function(e){var n=p(e.components);return t.createElement(i.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,s=e.mdxType,o=e.originalType,i=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=s,g=c["".concat(i,".").concat(m)]||c[m]||u[m]||o;return a?t.createElement(g,r(r({ref:n},d),{},{components:a})):t.createElement(g,r({ref:n},d))}));function m(e,n){var a=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var o=a.length,r=new Array(o);r[0]=c;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:s,r[1]=l;for(var p=2;p<o;p++)r[p]=a[p];return t.createElement.apply(null,r)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},70786:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var t=a(87462),s=(a(67294),a(3905));const o={sidebar_position:0},r="User Managment APIs",l={unversionedId:"node/generate-apis/user-management-apis",id:"node/generate-apis/user-management-apis",title:"User Managment APIs",description:"By the end of this document, you will know how to use user management APIs generated from the DhiWise.",source:"@site/docs/node/generate-apis/user-management-apis.md",sourceDirName:"node/generate-apis",slug:"/node/generate-apis/user-management-apis",permalink:"/docs/node/generate-apis/user-management-apis",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_position:0},sidebar:"node",previous:{title:"Sample Models",permalink:"/docs/node/generate-apis/sample-model"},next:{title:"Log In using Social Authentication",permalink:"/docs/node/generate-apis/login-using-social-authentication"}},i={},p=[{value:"Register User",id:"register-user",level:2},{value:"Sample request:",id:"sample-request",level:4},{value:"<strong>JSON</strong>",id:"json",level:4},{value:"<strong>cURL</strong>",id:"curl",level:4},{value:"Nodejs - Axios",id:"nodejs---axios",level:4},{value:"Sample success response:",id:"sample-success-response",level:4},{value:"Sample response if data is duplicate:",id:"sample-response-if-data-is-duplicate",level:4},{value:"Forgot Password",id:"forgot-password",level:2},{value:"Sample request:",id:"sample-request-1",level:4},{value:"<strong>JSON</strong>",id:"json-1",level:4},{value:"<strong>cURL</strong>",id:"curl-1",level:4},{value:"<strong>Nodejs - Axios</strong>",id:"nodejs---axios-1",level:4},{value:"Sample success response:",id:"sample-success-response-1",level:4},{value:"Sample response if the given email is not present in the database:",id:"sample-response-if-the-given-email-is-not-present-in-the-database",level:4},{value:"Validate OTP",id:"validate-otp",level:2},{value:"Sample request",id:"sample-request-2",level:4},{value:"JSON",id:"json-2",level:4},{value:"cURL",id:"curl-2",level:4},{value:"Nodejs - Axios",id:"nodejs---axios-2",level:4},{value:"Sample response:",id:"sample-response",level:4},{value:"Reset Password",id:"reset-password",level:2},{value:"Sample request",id:"sample-request-3",level:4},{value:"JSON",id:"json-3",level:4},{value:"cURL",id:"curl-3",level:4},{value:"Nodejs - Axios",id:"nodejs---axios-3",level:4},{value:"Sample response:",id:"sample-response-1",level:4},{value:"Login",id:"login",level:2},{value:"<strong>JSON</strong>",id:"json-4",level:4},{value:"<strong>cURL</strong>",id:"curl-4",level:4},{value:"Nodejs - Axios",id:"nodejs---axios-4",level:4},{value:"Sample success response:",id:"sample-success-response-2",level:4},{value:"Send Login OTP",id:"send-login-otp",level:2},{value:"Sample request:",id:"sample-request-4",level:4},{value:"<strong>JSON</strong>",id:"json-5",level:4},{value:"<strong>cURL</strong>",id:"curl-5",level:4},{value:"Nodejs - Axios",id:"nodejs---axios-5",level:4},{value:"Sample response:",id:"sample-response-2",level:4},{value:"Login with OTP",id:"login-with-otp",level:2},{value:"Sample Request",id:"sample-request-5",level:4},{value:"<strong>JSON</strong>",id:"json-6",level:4},{value:"<strong>cURL</strong>",id:"curl-6",level:4},{value:"Nodejs - Axios",id:"nodejs---axios-6",level:4},{value:"Sample response:",id:"sample-response-3",level:4}],d={toc:p};function u(e){let{components:n,...o}=e;return(0,s.kt)("wrapper",(0,t.Z)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"user-managment-apis"},"User Managment APIs"),(0,s.kt)("p",null,"By the end of this document, you will know how to use user management APIs generated from the DhiWise.\nThe DhiWise provides listed APIs for user management:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#register-user"},"Register user")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#login"},"Login")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#reset-password"},"Reset password")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#forgot-password"},"Forget password")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#validate-otp"},"Validate OTP"))),(0,s.kt)("p",null,"If you have configured Two-factor authentication then you have to use the following API for Log-in."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#send-login-otp"},"Send login OTP")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{href:"#login-with-otp"},"Login with OTP"))),(0,s.kt)("p",null,"How Two-Factor Authentication Work"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},'A user enters "username" and "password".')),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"API will ",(0,s.kt)("a",{href:"#send-login-otp"},"send OTP")," on email or on mobile if the user exists.")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Next, we will ",(0,s.kt)("a",{href:"#validate-otp"},"validate OTP")," that is entered by a user.")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"If OTP is valid then we will give a JWT token in response, else login will get failed."))),(0,s.kt)("p",null,"A ",(0,s.kt)("a",{href:"/docs/node/generate-apis/sample-model"},"user")," model will be our reference model for this documentation. "),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},(0,s.kt)("inlineCode",{parentName:"p"},"Change <Base URL> with the URL where your server is running.\nFor example: http://localhost:5000"))),(0,s.kt)("h2",{id:"register-user"},"Register User"),(0,s.kt)("p",null,"To register a user on any platform."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL:")," ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/register")),(0,s.kt)("h4",{id:"sample-request"},"Sample request:"),(0,s.kt)("h4",{id:"json"},(0,s.kt)("strong",{parentName:"h4"},"JSON")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n    "username": "Consuelo.Cole",\n    "password": "ExNa2RIyhAqVtSU",\n    "email": "Alexie20@yahoo.com",\n    "name": "Joanna Nicolas"\n}\n')),(0,s.kt)("h4",{id:"curl"},(0,s.kt)("strong",{parentName:"h4"},"cURL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'curl -X \'POST\' \\\n  \'<Base URL>/admin/auth/register\' \\\n  -H \'accept: application/json\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n  "username": "Consuelo.Cole",\n  "password": "ExNa2RIyhAqVtSU",\n  "email": "Alexie20@yahoo.com",\n  "name": "Joanna Nicolas"\n}\'\n')),(0,s.kt)("h4",{id:"nodejs---axios"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'var axios = require(\'axios\');\nvar data = JSON.stringify({\n  "username": "Consuelo.Cole",\n  "password": "ExNa2RIyhAqVtSU",\n  "email": "Alexie20@yahoo.com",\n  "name": "Joanna Nicolas"\n});\n\nvar config = {\n  method: \'post\',\n  url: \'<Base URL>/admin/auth/register\',\n  headers: { \n    \'accept\': \'application/json\', \n    \'Content-Type\': \'application/json\'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n')),(0,s.kt)("h4",{id:"sample-success-response"},"Sample success response:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Your request is successfully executed",\n  "data": {\n    "username": "Consuelo.Cole",\n    "email": "Alexie20@yahoo.com",\n    "name": "Joanna Nicolas",\n    "id": "617921bb256df40a522b81ba",\n    "_id": "617921bb256df40a522b81ba",\n    "loginRetryLimit": 0,\n    "createdAt": "2022-05-22T13:23:42.877Z",\n    "updatedAt": "2022-09-18T05:58:52.842Z",\n    "isDeleted": false,\n    "isActive": true\n  }\n}\n')),(0,s.kt)("h4",{id:"sample-response-if-data-is-duplicate"},"Sample response if data is duplicate:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("e",{className:"delete method"},"422")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "VALIDATION_ERROR",\n  "message": "User Registration Failed, Duplicate Data found",\n  "data": {}\n}\n')),(0,s.kt)("h2",{id:"forgot-password"},"Forgot Password"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL"),": ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/forgot-password")),(0,s.kt)("p",null,"If you want to provide functionality that if a user has forgotten his/her password then they can recreate their new password."),(0,s.kt)("h4",{id:"sample-request-1"},"Sample request:"),(0,s.kt)("h4",{id:"json-1"},(0,s.kt)("strong",{parentName:"h4"},"JSON")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "email": "yourmail@gmail.com"\n}\n')),(0,s.kt)("h4",{id:"curl-1"},(0,s.kt)("strong",{parentName:"h4"},"cURL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"curl -X 'POST' \\\n  '<Base URL>/admin/auth/forgot-password' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"email\": \"yourmail@gmail.com\"\n}'\n")),(0,s.kt)("h4",{id:"nodejs---axios-1"},(0,s.kt)("strong",{parentName:"h4"},"Nodejs - Axios")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"email\": \"yourmail@gmail.com\"\n});\n\nvar config = {\n  method: 'post',\n  url: '<Base URL>/admin/auth/forgot-password',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n")),(0,s.kt)("h4",{id:"sample-success-response-1"},"Sample success response:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Your request is successfully executed",\n  "data": "otp successfully send to your email."\n}\n')),(0,s.kt)("h4",{id:"sample-response-if-the-given-email-is-not-present-in-the-database"},"Sample response if the given email is not present in the database:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "RECORD_NOT_FOUND",\n  "message": "Record not found with specified criteria.",\n  "data": {}\n}\n')),(0,s.kt)("h2",{id:"validate-otp"},"Validate OTP"),(0,s.kt)("p",null,"To validate the OTP before we ask for a new password from the user."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL"),": ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/validate-otp")),(0,s.kt)("h4",{id:"sample-request-2"},"Sample request"),(0,s.kt)("h4",{id:"json-2"},"JSON"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "otp": "5898"\n}\n')),(0,s.kt)("h4",{id:"curl-2"},"cURL"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"curl -X 'POST' \\\n  '<Base URL>/admin/auth/validate-otp' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"otp\": \"5898\"\n}'\n")),(0,s.kt)("h4",{id:"nodejs---axios-2"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"otp\": \"5898\"\n});\n\nvar config = {\n  method: 'post',\n  url: '<Base URL>/admin/auth/validate-otp',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n\n")),(0,s.kt)("h4",{id:"sample-response"},"Sample response:"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"If OTP is valid and not expired")),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Otp verified",\n  "data": {}\n}\n')),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"If OTP is invalid")),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "FAILURE",\n  "message": "Invalid OTP",\n  "data": {}\n}\n')),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"If OTP is expired")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "FAILURE",\n  "message": "Your reset password link is expired or invalid",\n  "data": {}\n}\n')),(0,s.kt)("h2",{id:"reset-password"},"Reset Password"),(0,s.kt)("p",null,"To allow users to reset password"),(0,s.kt)("p",null,"API URL: ",(0,s.kt)("e",{className:"put method"},"PUT")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/reset-password")),(0,s.kt)("h4",{id:"sample-request-3"},"Sample request"),(0,s.kt)("h4",{id:"json-3"},"JSON"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "code": "5898",\n  "newPassword": "yourPassword"\n}\n')),(0,s.kt)("h4",{id:"curl-3"},"cURL"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"curl -X 'PUT' \\\n  '<Base URL>/admin/auth/reset-password' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"code\": \"5898\",\n  \"newPassword\": \"yourPassword\"\n}'\n")),(0,s.kt)("h4",{id:"nodejs---axios-3"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"code\": \"5898\",\n  \"newPassword\": \"yourPassword\"\n});\n\nvar config = {\n  method: 'put',\n  url: '<Base URL>/admin/auth/reset-password',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n")),(0,s.kt)("h4",{id:"sample-response-1"},"Sample response:"),(0,s.kt)("p",null,"If OTP is correct and the password is updated."),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Your request is successfully executed",\n  "data": "Password reset successfully"\n}\n')),(0,s.kt)("p",null,"If OTP is invalid"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'{\n  "status": "FAILURE",\n  "message": "Invalid Code",\n  "data": {}\n}\n')),(0,s.kt)("h2",{id:"login"},"Login"),(0,s.kt)("p",null,"To verify the user before we allow the user to access our resource."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL:")," ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/login")),(0,s.kt)("h4",{id:"json-4"},(0,s.kt)("strong",{parentName:"h4"},"JSON")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'{\n  "username": "Lester.Weber42",\n  "password": "ncx1AfID8cNysml"\n}\n')),(0,s.kt)("h4",{id:"curl-4"},(0,s.kt)("strong",{parentName:"h4"},"cURL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"curl -X 'POST' \\\n  '<Base URL>/admin/auth/login' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"username\": \"Lester.Weber42\",\n  \"password\": \"ncx1AfID8cNysml\"\n}'\n")),(0,s.kt)("h4",{id:"nodejs---axios-4"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"username\": \"Lester.Weber42\",\n  \"password\": \"ncx1AfID8cNysml\"\n});\n\nvar config = {\n  method: 'post',\n  url: '<Base URL>/admin/auth/login',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n")),(0,s.kt)("h4",{id:"sample-success-response-2"},"Sample success response:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Login successful.",\n  "data": {\n    "loginRetryLimit": 0,\n    "_id": "6179186894c816c40ae15988",\n    "username": "Lester.Weber42",\n    "role": 1,\n    "createdAt": "2021-10-27T09:14:16.940Z",\n    "updatedAt": "2021-10-27T09:14:16.940Z",\n    "isDeleted": false,\n    "isActive": true,\n    "id": "6179186894c816c40ae15988",\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNzkxODY4OTRjODE2YzQwYWUxNTk4OCIsInVzZXJuYW1lIjoiTGVzdGVyLldlYmVyNDIiLCJpYXQiOjE2MzU0MTY0MDcsImV4cCI6MTYzNjAxNjQwN30.IhWt3B6bnt7pXXEl8Qdgtu48TQ0Q7TUYQ4rawCzBaq8"\n  }\n}\n')),(0,s.kt)("p",null,"If user credentials are incorrect:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("e",{className:"delete method"},"400")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "BAD_REQUEST",\n  "message": "Login failed.",\n  "data": {}\n}\n')),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"If you have configured Two-factor authentication then you will have to use the following APIs for login.")),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Example banner",src:a(6921).Z,width:"1748",height:"1240"})),(0,s.kt)("h2",{id:"send-login-otp"},"Send Login OTP"),(0,s.kt)("p",null,"Before user login, this API will send OTP on registered email/mobile."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL"),": ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/send_login_otp")),(0,s.kt)("h4",{id:"sample-request-4"},"Sample request:"),(0,s.kt)("h4",{id:"json-5"},(0,s.kt)("strong",{parentName:"h4"},"JSON")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "username": "Lester.Weber42",\n  "password": "ncx1AfID8cNysml"\n}\n')),(0,s.kt)("h4",{id:"curl-5"},(0,s.kt)("strong",{parentName:"h4"},"cURL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"curl -X 'POST' \\\n  '<Base URL>/admin/auth/send_login_otp' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"username\": \"Lester.Weber42\",\n  \"password\": \"ncx1AfID8cNysml\"\n}'\n")),(0,s.kt)("h4",{id:"nodejs---axios-5"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"username\": \"Lester.Weber42\",\n  \"password\": \"ncx1AfID8cNysml\"\n});\n\nvar config = {\n  method: 'post',\n  url: '<Base URL>/admin/auth/send_login_otp',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n")),(0,s.kt)("h4",{id:"sample-response-2"},"Sample response:"),(0,s.kt)("p",null,"If user credentials are valid"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Login Successful",\n  "data": "Please check your email/mobile for OTP"\n}\n')),(0,s.kt)("p",null,"If user credentials are invalid"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "FAILURE",\n  "message": "User not found",\n  "data": {}\n}\n')),(0,s.kt)("h2",{id:"login-with-otp"},"Login with OTP"),(0,s.kt)("p",null,"Once the user receives OTP, then this API will take OTP with credentials and validate OTP."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"API URL:")," ",(0,s.kt)("e",{className:"post method"},"POST")," ",(0,s.kt)("inlineCode",{parentName:"p"},"<Base URL>/admin/auth/login_with_otp")),(0,s.kt)("h4",{id:"sample-request-5"},"Sample Request"),(0,s.kt)("h4",{id:"json-6"},(0,s.kt)("strong",{parentName:"h4"},"JSON")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "username": "Lester.Weber42",\n  "password": "ncx1AfID8cNysml",\n  "otp": "1234"\n}\n')),(0,s.kt)("h4",{id:"curl-6"},(0,s.kt)("strong",{parentName:"h4"},"cURL")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'curl -X \'POST\' \\\n  \'<Base URL>/admin/auth/login_with_otp\' \\\n  -H \'accept: application/json\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n  "username": "Lester.Weber42",\n  "password": "ncx1AfID8cNysml",\n  "otp": "1234"\n}\'\n')),(0,s.kt)("h4",{id:"nodejs---axios-6"},"Nodejs - Axios"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"var axios = require('axios');\nvar data = JSON.stringify({\n  \"username\": \"Lester.Weber42\",\n  \"password\": \"ncx1AfID8cNysml\",\n  \"otp\": \"1234\"\n});\n\nvar config = {\n  method: 'post',\n  url: '<Base URL>/admin/auth/login_with_otp',\n  headers: { \n    'accept': 'application/json', \n    'Content-Type': 'application/json'\n  },\n  data : data\n};\n\naxios(config)\n.then(function (response) {\n  console.log(JSON.stringify(response.data));\n})\n.catch(function (error) {\n  console.log(error);\n});\n")),(0,s.kt)("h4",{id:"sample-response-3"},"Sample response:"),(0,s.kt)("p",null,"If OTP is valid:"),(0,s.kt)("p",null,"Status code: ",(0,s.kt)("inlineCode",{parentName:"p"},"200")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "SUCCESS",\n  "message": "Login successful.",\n  "data": {\n    "loginRetryLimit": 0,\n    "_id": "6179186894c816c40ae15988",\n    "username": "Lester.Weber42",\n    "role": 1,\n    "createdAt": "2021-10-27T09:14:16.940Z",\n    "updatedAt": "2021-10-27T09:14:16.940Z",\n    "isDeleted": false,\n    "isActive": true,\n    "id": "6179186894c816c40ae15988",\n    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNzkxODY4OTRjODE2YzQwYWUxNTk4OCIsInVzZXJuYW1lIjoiTGVzdGVyLldlYmVyNDIiLCJpYXQiOjE2MzU0MTY0MDcsImV4cCI6MTYzNjAxNjQwN30.IhWt3B6bnt7pXXEl8Qdgtu48TQ0Q7TUYQ4rawCzBaq8"\n  }\n}\n')),(0,s.kt)("p",null,"If OTP is invalid:\nStatus code: ",(0,s.kt)("e",{className:"delete method"},"400")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "status": "BAD_REQUEST",\n  "message": "Invalid Code",\n  "data": {}\n}\n')),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("p",null,"Got a question?\xa0",(0,s.kt)("a",{parentName:"p",href:"https://discord.com/invite/rFMnCG5MZ7"},(0,s.kt)("strong",{parentName:"a"},"Ask here")),"."))}u.isMDXComponent=!0},6921:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/two-factor-dbb6283a4a1da9598f993aae86127449.png"}}]);